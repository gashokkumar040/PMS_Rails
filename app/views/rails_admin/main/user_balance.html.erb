<!DOCTYPE html>
<html>
<title>User Balance Sheet </title> 
<head>
  <!-- JS libraries -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <!-- JS libraries end -->

 
  <link rel="stylesheet" type="text/css" href="https://code.highcharts.com/css/highcharts.css">
  <!-- table styles -->
   <style type="text/css">
    /* high chart styles */
    #container {
      height: 400px;
      margin: 0 auto;
      min-width: 310px; 

      border-width: 1px;
      border-style: dotted;
      border-color: black;
    }
    .highcharts-title {
        fill: #434348;
        font-weight: bold;
        letter-spacing: 0.3em;
        font-size: 3em;
    }
    .highcharts-subtitle {
        font-family: 'Courier New', monospace;
        font-style: italic;
        fill: #7cb5ec;
    }/* End high chart styles*/
      
      /* table styles */
    table {
      padding: auto; 
      margin : 0 auto;
    }
    th, td {
      text-align: center;
      padding:0 110px;
    }
    th{
      background-color:  #00f29f;
    }
    tr:nth-child(even) { background-color:lightgray; }
  </style>
  <!-- table styles end -->
</head>



<body>
  <!-- for high chart area -->
  <h1><%= @object.first_name.capitalize%>, Projects</h1>
  <div id="container"></div>

  <!-- for table data -->
  <div class="user balance table">
    <h1 style="padding-left: 10px"><%= @object.email %>, Balance Sheet</h1><br>
    <table>
      <tr>
        <th>Project ID</th>
        <th>Amount</th>
        <th>Credit/Debit</th>
        <th>Balance</th>
      </tr>

      <tr>
        <% @object.credit_checkers.each do |cc|%>
            <tr>
              <td><%= cc.project_id %></td>
              <td><%= cc.amount %></td>
              <td><%= cc.account_status %></td>
              <td><%= cc.balance%></td>
            </tr>
        <% end %>
      </tr>
    </table>
  </div><!--/user balance table -->

  <div style="height: 400px;"></div>


    <!-- custom JS -->
  <script>
   $(function () { 
        var myChart = Highcharts.chart('container', {
            chart: {
                //zoomType: 'x'
                type : 'line'
            },
            title: {
                text: 'Projects Graph'
            },

            xAxis: {
                // categories: ['Apples', 'Bananas', 'Oranges']
                title: {
                  text: 'no. of projects'
                }
            },
            yAxis: {
                title: {
                    text: 'count'
                }
            },
            tooltip: {
            
                  // shared: true,
                  // useHTML: true,
                  // headerFormat: '<small>count id: {point.key}</small><table>',
                  // pointFormat: '<tr><td style="color: {series.color}">{series.name} id : </td>' +
                  //     '<td style="text-align: left"><b>{point.y} </b></td></tr>',
                  // footerFormat: '</table>',
                  // valueDecimals: 2,
                formatter: function() {
                return 'count : <b>' + this.x + ',<br> </b>'+this.series.name +' id: <b>' + this.y + '</b>';
                },

                //crosshairs: [true, false],
                backgroundColor: '#FCFFC5',
                borderColor: 'black',
                borderRadius: 10,
                borderWidth: 3
            },
            // legend: {

            //     layout: 'vertical',
            //     align: 'right',
            //     verticalAlign: 'middle'
            // },
             plotOptions: {
                  series: {
                      label: {
                          connectorAllowed: false
                      },
                      pointStart: 1
                  }
              },
                
            series: [{
                name: 'Credit Checkers',
                data:  <%= CreditChecker.ids%>//

            }, 
            {
                name: 'Projects',
                //un approved projects
                data: <%= Project.where("approved = false").ids%>
            }, 
            // {
            //   name: 'Balance'
            //   data: <%= CreditChecker.where("").ids %>
            // }
            // {
            //     name: 'count',
            //     data: <%= CreditChecker.where("user_id =? AND project_id =?",@object.id,35).count%>
            // }
            ]
        });
    });
  </script>
 
  <!-- custom JS end -->
</body>
</html>